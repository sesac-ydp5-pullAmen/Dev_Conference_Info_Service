<!DOCTYPE html>
<html lang="ko">
    <head>
        <%- include('../../common/head.ejs', { title: '내가 등록 신청한 행사' })
        %>
        <link
            rel="stylesheet"
            href="/static/css/pages/myPage/managerAside.css"
        />
        <link rel="stylesheet" href="/static/css/pages/myPage/conHandler.css" />

        <link rel="stylesheet" href="/static/css/pages/myPage/myRevList.css" />

    </head>

    <body>
        <%- include('../../common/header.ejs') %>
        <main>
            <%- include('./profileAside', { id: id }) %> <% if (data) { %>

            <div class="cardCenter content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-10 marginRemove">
                            <div class="card">
                                <div class="card-body">
                                    <table class="table text-center">
                                        <thead>
                                            <tr class="border-bottom">
                                                <th></th>
                                                <th>행사 이름</th>
                                                <th>주최사</th>
                                                <th class="un">신청한 시간</th>
                                                <th>승인 여부</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% data.forEach(function(conference,
                                            index) { %>
                                            <tr class="border-bottom">
                                                <td><%= index + 1 %></td>
                                                <td>
                                                    <% if
                                                    (conference.is_agreed
                                                    === 1) { %>
                                                    <a
                                                        href="/event/<%= conference.con_id %>"
                                                        ><%=
                                                        conference.con_title
                                                        %></a
                                                    >
                                                    <% } else { %> 
                                                    <a  onclick="rejectConAlert();"><%=conference.con_title %></a>
                                                     <% } %>
                                                </td>
                                                <td>
                                                    <%=
                                                    conference.con_company
                                                    %>
                                                </td>
                                                <td class="un">

                                                    <%=
                                                    conference.createdAt
                                                    %>
                                                    <%#= resultYear %>
                                                </td>
                                                <td>
                                                    <% if
                                                    (conference.is_agreed
                                                    === 1) { %> 승인 완료 <% }
                                                    else if
                                                    (conference.is_agreed
                                                    === 0) { %> 승인 대기중 <% }
                                                    else if
                                                    (conference.is_agreed
                                                    === -1) { %> 거절 <% } else
                                                    { %> 알 수 없음 <% } %>
                                                </td>
                                            </tr>
                                            <% }); %>
                                        </tbody>
                                    </table>

                                    <% } else { %>

                                        <div class="cardCenter content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-10 marginRemove">
                            <div class="card">
                                <div class="card-body">
                                    <table class="table text-center">
                                        <thead>
                                            <tr class="border-bottom">
                                                <th></th>
                                                <th>행사 이름</th>
                                                <th>주최사</th>
                                                <th class="un">신청한 시간</th>
                                                <th>승인 여부</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-bottom">
                                                <td colspan="5">
                                                    사용자가 신청한 행사가
                                                    없습니다.
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <%- include('../../common/footer.ejs') %>
<script>
    function rejectConAlert() {
        alert('해당 행사는 거절되었습니다. 관련사항은 관리자에게 문의 바랍니다.');
    }
    
    </script>
    </body>
</html>
